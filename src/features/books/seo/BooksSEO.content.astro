---
import { type CollectionEntry } from "astro:content";

import { SITE_DEFAULT_CONFIG } from "@/global/siteInfo";
import { convertDateToISO8601 } from "@utils/validatingDate";

import ContentSEO from "@/components/common/seo/ContentSEO.astro";

const { entry } = Astro.props;

const library = entry as CollectionEntry<"library">;
const { data } = library;
const { cover, title, keywords, publishDate, titleTag } = data;

const postName = `${titleTag} - ${SITE_DEFAULT_CONFIG.title}`;

const postDescription = `Resumen e insights de ${title} - ${SITE_DEFAULT_CONFIG.title}`;

const ogImage = new URL("./og-image.png", Astro.site);
const canonicalURL = new URL(Astro.url.pathname, Astro.site);

const justInCaseNoCoverSrc =
  `${SITE_DEFAULT_CONFIG.url}${cover.src.src}` || ogImage;
const justInCaseNoCoverAlt = cover.alt || postName;

const publisDateInISO = convertDateToISO8601(publishDate);
const lastTimeEditedInISO = publisDateInISO;
---

<ContentSEO
  postName={postName}
  postDescription={postDescription}
  canonicalURL={canonicalURL}
  justInCaseNoCoverSrc={justInCaseNoCoverSrc}
  justInCaseNoCoverAlt={justInCaseNoCoverAlt}
  publisDateInISO={publisDateInISO}
  lastTimeEditedInISO={lastTimeEditedInISO}
  keywords={keywords}
/>
